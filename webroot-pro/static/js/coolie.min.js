/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.8.2
 * @license MIT
 */
!function(){"use strict";var e,t="0.8.0",n=function(){return(new Date).getTime()},r=0,i=window,o=i.document,u={},a=[],c=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},s=function(e){return"array"===c(e)},d=function(e){return"function"===c(e)},f=function(e){return"string"===c(e)},l=function(e,t,n){var r,i;if(s(e))for(r=n?e.length-1:0,i=n?0:e.length;(n?r>i:i>r)&&t(r,e[r])!==!1;n?r--:r++);else if("object"==typeof e)for(r in e)if(t(r,e[r])===!1)break},p=function(){var e={},t=i.console,n=["log","warn","group","groupEnd"];return l(n,function(n,r){e[r]=function(){if(u.debug&&t&&t[r])try{t[r].apply(t,arguments)}catch(e){}}}),e}(),g=/\/[^/]+$/,h=function(e,t){return e=e.replace(b,""),"/"===e?e:g.test(e)?t?e+"/":e.replace(g,"/"):e},m=/^\//,v=/^(\.{1,2})\//,w=/(\/[^/]+?)?\/$/,_=function(e,t){if(!t||m.test(t))return t;var n;for(t="./"+t;n=t.match(v);)t=t.replace(v,""),2===n[1].length&&(e=e.replace(w,"/"));return e+t},y=function(e,t){return(t||o).getElementsByTagName(e)},x=/[\?#].*?$/,b=/^(ftp|file|https?):\/\/[^\/]*/,A=/\.js($|\?)/i,j=function(e,t){return e=e.replace(x,""),t?e:(w.test(e)&&(e+="index"),e+(A.test(e)?"":".js"))},$=function(e){return j(e.hasAttribute?e.src:e.getAttribute("src",4))},q=function(e,t){return e.getAttribute("data-"+t)},E=/loaded|complete/,S=o.head||y("head",o)[0],k=y("base",S)[0],C=/\.[^.]*$/,T=function(e){if(!u._v)return e;var t=f(u._v)?u._v:u._v[e];return t?e.replace(C,"."+t+"$&"):e},L=null,B=function(t,n){var r=T(t),u=o.createElement("script"),a=!1,c=function(e){if(!a){if(a=!0,e&&"error"===e.type)throw"load script error\n"+r;n!==!0&&(L=u,at(u)),S.removeChild(u),u=null}};u.src=r,u.id=t,u.async=!0,u.defer=!0,u.onload!==e?u.onload=u.onerror=c:u.onreadystatechange=function(e){E.test(u.readyState)&&(e=e||i.event,c(e))},k?S.insertBefore(u,k):S.appendChild(u)},M=function(e){var t,n=T(e),r=new XMLHttpRequest,i=function(){if(4===r.readyState&&!t){if(t=!0,200!==r.status&&304!==r.status)throw"ajax error\n"+n;ct({_isAn:K._isAn,id:e,url:n,deps:[],factory:function(){return r.responseText}})}};r.onload=r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=i,r.open("GET",n),r.send(null)},D=function(e){ct({_isAn:K._isAn,id:e,url:T(e),deps:[],factory:function(){return e}})},G=function(){var e=y("script");return e[e.length-1]}(),H=$(G),N=H.match(b)[0],O=q(G,"config"),R=q(G,"main"),X=h(H),z=_(X,O),F=N+z,I={};I.version=t;var J=null,K={},P=!1,Q={},U=[],V={},W=1,Y=0;I.config=function(e){if(u=e,J=_(X,h(u.base,!0)),u.version=u.version||{},u.host&&(N=u.host),f(u.version)?u._v=u.version:(u._v={},l(u.version,function(e,t){u._v[N+_(J,e)]=t})),R){var t=K.url=j(N+_(J,R));K._defined=!1,Q[t]=K}return e.debug=e.debug!==!1,I},I.use=function(e){return P?I:(P=!0,r=n(),e&&(K.url=j(N+_(J,e)),Q[K.url]=K),K.url?(B(K.url),p.group("coolie modules"),I):I)},I.callback=function(e){return K._executed&&d(e)?(e.call(I,K.exports),I):(d(e)&&a.push(e),I)};var Z=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,et=/\\\\/g,tt=/([^"']+)(?:['"]\s*?,\s*?['"]([^'"]*))?/,nt=function(e){return ot.test(e)?{name:j(e.replace(ot,""),!0),type:"text"}:ut.test(e)?{name:j(e.replace(ut,""),!0),type:"image"}:{name:j(e),type:"js"}},rt={image:"image",text:"text",html:"text",css:"text"},it=function(e){var t=[];return e.replace(et,"").replace(Z,function(e,n,r){if(r){var i,o=r.match(tt);i=o[2]?{name:j(o[1],!0),type:rt[o[2].toLowerCase()]}:nt(o[1]),t.push(i)}}),t},ot=/^(css|html|text)!/i,ut=/^(image)!/i,at=function(e){var t=!0,n=U.shift(),r=n[0],i=n[1],o=n[2],u=e.id,a=$(e),c=h(u);d(n[2])?t=!1:d(n[1])?(r=null,i=[],o=n[1]):d(n[0])&&(o=n[0],i=it(o.toString()),r=null),r=K._defined&&K._isAn?u:r||u;var s={_isAn:t,_path:c,_node:e,id:r,url:a,deps:i,factory:o};K.id||(t||(Q[r]=Q[K.url]),s._isMain=!0,K=s,K._defined=!0);var p=[];l(i,function(e,t){if(f(t)&&(t={id:t}),K._isAn){var n=_(c,t.name);t.id=j(N+n,"js"!==t.type)}if(r===t.id)throw"required myself: \n"+r;if(V[t.id]&&l(V[t.id].deps,function(e,t){if(t===r)throw"required circle: \n"+t.id+"\n"+r}),!Q[t.id]&&(p.push(t.id),Q[t.id]=!0,W++,K._isAn))switch(t.type){case"text":M(t.id);break;case"image":D(t.id);break;default:B(t.id)}}),s.deps=p,ct(s),U.length&&at(L)},ct=function(e){e.exports={},e._execute=function(){var t=function(t,n){var r;if(K._isAn&&(r=n?{name:t,type:n}:nt(t),t=N+j(_(e._path,r.name),"js"!==r.type)),!V[t])throw"can not found module \n"+t+"\nbut required in\n"+e.id;return V[t]._execute()};return function(){var n=e.id;return e._executed?V[n].exports:(e._executed=!0,V[n].exports=e.factory.call(window,t,e.exports,e)||e.exports,V[n].exports)}}(),V[e.id]=e,Y++,p.log("module "+e.id),U.length||Y!==W||(p.log("past "+(n()-r)+"ms"),p.groupEnd("coolie modules"),K._execute(),l(a,function(e,t){t.call(I,K.exports)}))},st=function(e,t,n){U.push([e,t,n])};O&&B(F+"?"+n(),!0),window.coolie=I,window.coolie.modules=V,window.coolie.configs=u,window.coolie.each=l,window.define=st,window.define.amd={},window.define.cmd={}}();
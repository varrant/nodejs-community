/*coolie@0.21.11*/
define("0",["1","2","3"],function(n,e,i){"use strict";n("1");n("2");var u=n("3");new u("#column",{url:"/admin/api/column/",itemKey:"column",listKey:"columns",type:"专辑"})});
define("1",["4","5","6","7","8","9","a","b","c","d"],function(n,o,i){"use strict";var t=n("4"),e=n("5"),a=n("6"),c=n("7"),r=n("8"),u=n("9"),l=n("a"),s=n("b"),f=n("c"),d=n("d"),v={},p="active",g="unfolded",m=window,h=m["-developer-"],C=!!h.id;v.toggle=function(){var n=t.query("#header")[0],o=t.query("#nav")[0],i=t.query(".j-flag",n),a=i[0],c=i[1],r=i[2],l=i[3],s=m["-section-"]&&m["-section-"].uri||"home";s=s.replace(/\/.*$/,"");var f=t.query(".nav-item-"+s,r)[0];e.addClass(f,p);u.on(c,"click",function(){e.addClass(o,g);return!1});u.on(a,"click",function(){e.removeClass(o,g);return!1});if(C){u.on(l,"click",function(){e.hasClass(n,p)?e.removeClass(n,p):e.addClass(n,p);return!1});u.on(document,"click",function(){e.removeClass(n,p)})}};v.notification=function(){if(C){var n=t.query(".j-notification-wrap");n.length&&s({url:"/admin/api/notification/count/",loading:!1}).on("success",function(o){var i=o||0,t=i>9?"N":i;n.forEach(function(n){var o=a.create("span",{"class":"nav-notification-count j-notification-count transition","data-value":i});o.innerHTML=t;e.css(o,"display",i?"":"none");a.insert(o,n)})}).on("error",f)}};v.logout=function(){var n=function(){s({method:"post",url:"/api/developer/logout/",loading:"注销中"}).on("success",function(){var n=location.pathname;/^\/admin\//i.test(n)?location.replace("/"):location.replace(n)}).on("error",f)};u.on(document,"click",".j-logout",function(o){o.preventDefault();d("亲爱的<b>"+h.nickname+"</b>：<br>确定要登出吗？").on("sure",n)})};v.toggle();v.notification();v.logout()});
define("b",["r","s","c","t","p","o"],function(e,n,o){"use strict";var r=e("r"),t="application/json; charset=utf-8",i=e("s"),c=e("c"),s=e("t"),a=e("p"),d=e("o"),u=d["extends"](a).create(function(e){var n=this,o=e.body&&e.body.constructor===FormData;e.headers=e.headers||{};o||(e.headers["content-type"]=e.headers["content-type"]||t);e.headers.accept=t;e.headers["x-request-csrf"]=window["-csrf-"];o||(e.body=JSON.stringify(e.body));if(e.loading!==!1&&null!==e.loading){n.loading&&n.loading.done();n.loading=new s(window,e.loading)}n.xhr=r.ajax(e).on("success",function(e){switch(e.code){case 400:break;case 401:return c(e).on("sure",i);case 406:return c(e).on("close",function(){location.replace("/")})}if(200===e.code)return n.emit("success",e.data);var o=new Error(e.message);o.code=e.code;n.emit("error",o)}).on("error",function(e){n.emit("error",e)}).on("progress",function(e){n.emit("progress",e)}).on("complete finish",function(e,o){if(!e&&200!==o.code){e=new Error(o.message);e.code=o.code}n.emit(this.alienEmitter.type,e,o&&o.data)}).on("complete",function(){if(n.loading){n.loading.done();n.loading=null}})});o.exports=function(e){return new u(e)}});
define("s",[],function(e,o,n){"use strict";n.exports=function(){var e=window.screen.width,o=window.screen.height,n=1080,i=600,t=(e-n)/2,r=(o-i)/3,h="/developer/oauth/authorize/";e>1080?window.open(h,"授权 github 登录","width="+n+",height="+i+",top="+r+",left="+t+",scrollbars=no,resizable=no,menubar=no"):window.location.href=h}});
define("2",["4","5","6","7","m","a","17","1a"],function(o,n,r){"use strict";var t=o("4"),i=o("5"),s=o("6"),c=o("7"),e=o("m"),a=o("a"),l=o("17"),u=o("1a"),d=window,f={};f.scrollProgress=function(){var o=t.query("#scrollProgress")[0],n=new u(d);n.on("y",function(n){c.transition(o,{width:100*n.ratioY+"%"},{duration:100})})};f.gotop=function(){var o=t.query("#gotop")[0],n=!1,r={durtaion:567},s="active";e.on(d,"scroll",a.debounce(function(){var n=i.scrollTop(window);i[(n>20?"add":"remove")+"Class"](o,s)}));e.on(o,"click",function(){if(!n){n=!0;c.scrollTo(d,{y:0},r,function(){n=!1;i.removeClass(o,s);i.css(o,"bottom","")});c.transition(o,{bottom:"100%"},r)}})};f.scrollProgress();f.gotop()});
define("3",["x","b","c","d","1b","4","1c","m","e","1d"],function(e,t,o){"use strict";var n=e("x"),i=e("b"),a=e("c"),s=e("d"),u=e("1b"),l=e("4"),r=e("1c"),d=e("m"),c=r.get("query","id"),p=e("e"),_=e("1d"),h={emptyData:{name:"",uri:"",background:"",cover:"",introduction:"",label:"",labels:[]},uploadOptions:{isClip:!0,minWidth:200,minHeight:200,ratio:1,ajax:{url:"http://up.qiniu.com/",method:"post",fileKey:"file"}},url:"",itemKey:"",listKey:"",type:""},v=n.create({constructor:function(e,t){var o=this;o._selector=e;o._options=p.extend(!0,{},h,t);o._init()},_init:function(){var e=this,t=e._options;e._initData();e._upload=new _(t.uploadOptions);e._upload.on("success",function(t){if(!t.key){a("上传失败");return!1}e.vue.$data[e._options.itemKey][e._imgKey]=e._url}).on("upload",function(){i({url:"/admin/api/qiniu/"}).on("success",function(t){e._url=t.url;e._upload.setOptions({ajax:{body:{key:t.key,token:t.token}}});e._upload.upload()}).on("error",function(){e.close();a("上传凭证获取失败")});return!1}).on("error",a)},_initData:function(){var e=this,t=e._options,o=t.itemKey,n=t.listKey;i({url:t.url}).on("success",function(i){var a=p.extend({},t.emptyData);c&&p.each(i,function(e,t){if(t.id===c){a=t;return!1}});var s={};s[n]=i;s[o]=a;e.vue=new Vue({el:e._selector,data:s,methods:{onupload:e._onupload.bind(e),onreset:e._onreset.bind(e),onsave:e._onsave.bind(e),onchoose:e._onchoose.bind(e),pushlabel:e._onpushlabel.bind(e),removelabel:e._onremovelabel.bind(e),onremove:e._onremove.bind(e)}});e.vue.$el.classList.remove("none");e._translate()}).on("error",a)},_onupload:function(e,t){var o=this;o._upload.setOptions("isClip",e).open();o._imgKey=t||"cover"},_onreset:function(){var e=this,t=e._options,o=t.itemKey;e.vue.$data[o]=p.extend({},t.emptyData)},_onsave:function(){var e=this,t=e._options,o=this.vue,n=t.itemKey,s=t.listKey,l=o.$data[n],r=!!l.id;i({method:"put",url:t.url,body:o.$data[n],loading:"设置中"}).on("success",function(e){r||o.$data[s].push(e);o.$data[n]=e;u.success("保存成功")}).on("error",a)},_onchoose:function(e){var t=this.vue,o=this._options.itemKey,n=this._options.listKey;t.$data[o]=t.$data[n][e]},_onpushlabel:function(){var e=this.vue,t=this._options.itemKey,o=e.$data[t].label.trim();if(o&&-1===e.$data[t].labels.indexOf(o)&&e.$data[t].labels.length<5){e.$data[t].labels.push(o);e.$data[t].label=""}},_onremovelabel:function(e){this.vue.$data[this._options.itemKey].labels.splice(e,1)},_onremove:function(e){var t=this,o=t._options,n=o.listKey,u=o.type,l=t.vue,r=l.$data[n][e],d=r.id;if(r.objectCount>0)return a("该"+u+"下还有"+r.objectCount+"个项目，无法删除");var c=function(){i({url:o.url,method:"delete",body:{id:d},loading:"删除中"}).on("success",function(){l.$data[n].splice(e,1)}).on("error",a)};s("确认要删除该"+u+"吗？").on("sure",c)},_translate:function(){var e=null,t=this._options.itemKey,o=this.vue,n=l.query("#translate")[0];d.on(n,"keyup",function(){e&&e.xhr&&e.xhr.abort();e=i({loading:!1,url:"/api/translate/?word="+encodeURIComponent(this.value)}).on("success",function(e){o.$data[t].uri=e}).on("complete",function(){e=null})})}});v.defaults=h;o.exports=v});
define("1b",["y","6","1e"],function(t,n,e){"use strict";var i=t("y"),s=t("6"),u=t("1e");s.importStyle(u);var o=function(t,n){return new i({width:"auto",minWidth:100,isModal:!1,title:null,content:n,buttons:null,addClass:"alien-msg-"+t,timeout:3456})};n.success=function(t){o("success",t)};n.error=function(t){o("error",t)}});
define("1e",[],function(y,d,r){r.exports="@charset \"utf-8\";.alien-msg-success .alien-ui-msg{background:#09A51D}.alien-msg-error .alien-ui-msg{background:#A50909}.alien-msg-error .alien-ui-msg-body,.alien-msg-success .alien-ui-msg-body{color:#fff;text-align:center;font-weight:900;padding:10px 20px}"});
define("1f",["e","f"],function(t,r,e){"use strict";var d=t("e"),i=t("f"),h={srcLeft:0,srcTop:0,srcWidth:null,srcHeight:null,drawLeft:0,drawTop:0,drawWidth:null,drawHeight:null};e.exports=function(t,r,e){var a=t.getContext("2d");e=d.extend({},h,e);i.empty(e.srcWidth)&&(e.srcWidth=r.width);i.empty(e.srcHeight)&&(e.srcHeight=r.height);i.empty(e.drawLeft)&&(e.drawLeft=0);i.empty(e.drawTop)&&(e.drawTop=0);i.empty(e.drawWidth)&&(e.drawWidth=e.srcWidth);i.empty(e.drawHeight)&&(e.drawHeight=e.srcHeight);a.drawImage(r,e.srcLeft,e.srcTop,e.srcWidth,e.srcHeight,e.drawLeft,e.drawTop,e.drawWidth,e.drawHeight)}});
define("1g",["e","f","k","6","m"],function(t,e,n){"use strict";var a=t("e"),o=t("f"),r=t("k"),i=t("6"),l=t("m"),u="toBlob"in HTMLCanvasElement.prototype,f={type:"image/png",quality:1},s=function(t){for(var e=0,n=atob(t.split(",")[1]),a=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(n.length),r=new Uint8Array(o);e<n.length;e++)r[e]=n.charCodeAt(e);return new Blob([o],{type:a})};e.toBase64=function(t,e){e=a.extend({},f,e);return t.toDataURL(e.type,e.quality)};e.toBlob=function(t,n,i){var l=r.args(arguments);if(o["function"](l[1])){i=l[1];n={}}n=a.extend({},f,n);if(u)return t.toBlob(i,n.type,n.quality);var p=e.toBase64(t,n);i(s(p))};e.saveAs=function(t,e,n){n=a.extend({},f,n);var o=t.toDataURL(n.type,n.quality),r=i.create("a",{href:o,download:e});l.dispatch(r,"click")}});
define("1d",["x","g","4","6","5","m","f","e","1f","1g","r","1h","1i","11","1j","1k"],function(i,e,o){"use strict";var t=i("x"),n=i("g"),s=i("4"),a=i("6"),r=i("5"),c=i("m"),d=i("f"),_=i("e"),l=a.create("canvas"),p=i("1f"),f=i("1g"),u=i("r"),g=i("1h"),m=i("1i"),h=i("11"),v=i("1j"),b=i("1k"),y=new h(v),$=window[n.html5("URL",window)],w="alien-ui-upload",C={isClip:!0,minWidth:200,minHeight:200,accept:"image/png,image/jpg,image/jpeg,image/gif,image/bmp",ratio:1,quality:1,ajax:{url:"",method:"put",headers:{},body:{},fileKey:"file"}},L=t.create({constructor:function(i){var e=this;e._options=_.extend(!0,{},C,i);e._init()},_init:function(){var i=this;i._isChoosed=!1;i._isReady=!1;i._initNode();i._applyOptions();i._initEvent()},_initNode:function(){var i=this,e=i._options,o=y.render(e),t=a.parse(o)[0];a.insert(t,document.body,"beforeend");i._$dialog=t;i._dialog=new g(i._$dialog,{width:"auto"});var n=s.query(".j-flag",t);i._$file=n[0];i._$imageWrap=n[1];i._$cancel=n[2];i._$submit=n[3]},_applyOptions:function(){var i=this,e=i._options;i._dialog.setTitle((e.isClip?"裁剪并":"")+"上传图片");i._$submit.innerHTML=i._submitHTML=(e.isClip?"裁剪并":"确认")+"上传图片";i._setChoosed(!1);i._resetFile();if(i._imgclip){i._imgclip.destroy();i._imgclip=null}},_resetFile:function(){var i=this;if(i._$file.files){var e=i._options,o=a.create("input",{type:"file",accept:e.accept,"class":w+"-file"});a.insert(o,i._$file,"afterend");a.remove(i._$file);i._$file=o}},_setChoosed:function(i){var e=this;if(e._isChoosed!==i){e._isChoosed=i;r[(i?"add":"remove")+"Class"](e._$dialog,w+"-choosed");i||e._setReady(i)}},_setReady:function(i){var e=this;if(e._isReady!==i){e._isReady=i;r[(i?"add":"remove")+"Class"](e._$dialog,w+"-ready");e._dialog.resize()}},_initEvent:function(){var i=this;i._dialog.on("beforeopen",function(){i._applyOptions()});i._dialog.on("close",function(){i._xhr&&i._xhr.abort()});c.on(i._$dialog,"change","."+w+"-file",function(e){var o;if(this.files&&this.files.length){o=this.files[0];if(this.accept.indexOf(o.type)>-1){i.emit("choose",e);i._setChoosed(!0);i._renderImg(o)}else i.emit("error",new Error("只能选择图片文件！"))}});c.on(i._$cancel,"click",function(){if(!i._isUpload){i._applyOptions();i._dialog.resize();i.emit("cancel")}});c.on(i._$submit,"click",function(){i._isUpload||i.emit("upload")!==!1&&i.upload()});c.on(document,"dragenter dragover",i._ondrag.bind(i));c.on(document,"drop",i._ondrop.bind(i));c.on(document,"paste",i._onpaste.bind(i))},upload:function(){var i=this,e=i._options;i._isUpload||(e.isClip?i._toBlob(function(e){i._toUpload(e)}):i._toUpload(i._file))},_ondrag:function(){var i=this;return i._dialog._window.visible?!1:void 0},_ondrop:function(i){var e=this;if(e._dialog._window.visible){e._parseImgList(i,i.dataTransfer&&i.dataTransfer.items);return!1}},_onpaste:function(i){var e=this;if(e._dialog._window.visible){e._parseImgList(i,i.clipboardData&&i.clipboardData.items);return!1}},_parseImgList:function(i,e){var o=this,t=o._options,n=null;_.each(e,function(i,e){var o;if(t.accept.indexOf(e.type)>-1&&"file"===e.kind){o=e.getAsFile();if(o&&o.size>0){n=o;return!1}}});if(n){o._setChoosed(!0);o._renderImg(n)}},_renderImg:function(i){var e=this,o=$.createObjectURL(i),t=a.create("img",{src:o}),n=e._options;t.onload=function(){e._dialog.resize()};e._$imageWrap.innerHTML="";a.insert(t,e._$imageWrap,"beforeend");e._imgclip&&e._imgclip.destroy();n.isClip?e._imgclip=new m(t,e._options).on("clipend",function(i){e._selection=i;e._setReady(!0)}).on("error",function(i){e.emit("error",i)}):e._setReady(!0);e._file=i;e._$img=t},_toBlob:function(i){var e=this,o=e._selection;l.width=o.srcWidth;l.height=o.srcHeight;p(l,e._$img,{srcLeft:o.srcLeft,srcTop:o.srcTop,srcWidth:o.srcWidth,srcHeight:o.srcHeight});f.toBlob(l,i)},_toUpload:function(i){var e=this,o=e._options,t=new FormData,n=_.extend({},o.ajax);e._isUpload=!0;t.append(n.fileKey,i);_.each(n.body,function(i,e){t.append(i,e)});n.body=t;e._xhr=u.ajax(n).on("progress",function(i){e._$submit.innerHTML="正在上传 <b>"+i.alienDetail.percent+"</b>"}).on("success",function(i){e.emit("success",i)!==!1&&e.close()}).on("error",function(i){e.emit("error",i)!==!1&&e.close()}).on("complete",function(i,o){e.emit("complete",i,o)}).on("finish",function(i,o){e.emit("finish",i,o);e._isUpload=!1;e._$submit.innerHTML=e._submitHTML})},open:function(){this._dialog.open();return this},close:function(){var i=this;i._dialog.close();return i},destroy:function(i){var e=this;c.un(e._$dialog,"change");c.un(e._$cancel,"click");c.un(e._$submit,"click");c.un(document,"dragenter dragover",e._ondrag);c.un(document,"drop",e._ondrop);c.un(document,"paste",e._onpaste);e._applyOptions();e._dialog.destroy(i)}});L.defaults=C;t.importStyle(b);o.exports=L});
define("1j",[],function(y,d,r){r.exports="<div class=\"alien-ui-upload\"> <div class=\"alien-ui-upload-choose\">点击选择图片或粘贴、拖拽图片到这里<input type=\"file\" accept=\"{{accept}}\" class=\"alien-ui-upload-file j-flag\"/></div> <div class=\"alien-ui-upload-image j-flag\"></div> <div class=\"alien-ui-upload-action\"> <div class=\"alien-ui-upload-btn alien-ui-upload-cancel j-flag\">取消选择</div> <div class=\"alien-ui-upload-btn alien-ui-upload-submit j-flag\"></div> </div></div>"});
define("1k",[],function(y,d,r){r.exports=".alien-ui-upload-choose{position:relative;width:500px;height:300px;text-align:center;line-height:300px;font-size:18px;color:#bbb;border:2px dashed #CCC;background:#F5F5F5;overflow:hidden}.alien-ui-upload-choose input{position:absolute;right:0;top:0;font-size:500px;opacity:0;cursor:pointer}.alien-ui-upload-image{display:none;position:relative;width:500px;max-height:500px;text-align:center}.alien-ui-upload-image img{vertical-align:middle;max-width:100%;max-height:500px;width:auto;height:auto;border:0;box-shadow:0 0 10px #888}.alien-ui-upload-action{display:none;border-top:2px solid #eee;padding-top:15px;margin:15px -20px 0;text-align:center}.alien-ui-upload-btn{display:inline-block;position:relative;border:1px solid;border-radius:4px;padding:6px 14px;font-size:14px;line-height:20px;cursor:pointer}.alien-ui-upload-cancel{background:#F9F9F9;border-color:#ddd;color:#666}.alien-ui-upload-submit{display:none;background:#458AC6;color:#FFF;border-color:#3D83C0}.alien-ui-upload-choosed .alien-ui-upload-choose{display:none}.alien-ui-upload-choosed .alien-ui-upload-action,.alien-ui-upload-choosed .alien-ui-upload-image{display:block}.alien-ui-upload-ready .alien-ui-upload-submit{display:inline-block}"});
coolie.chunk(["0","1","2"]);
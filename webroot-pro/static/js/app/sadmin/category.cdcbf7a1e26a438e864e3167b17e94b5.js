/*coolie@0.21.18*/
define("0",["3m","3n","3o"],function(e,t,y){"use strict";e("3m");e("3n");var a=window.APP,i=e("3o");new i("#category",{url:"/admin/api/category/",query:{type:a.type},emptyData:{type:a.type},itemKey:"category",listKey:"categories",type:"分类",data:{typeMap:{1:"文章分类",2:"导航分类"}}})});
define("3m",["4","7","m"],function(n){"use strict";var e=n("4"),o=n("7"),t=n("m"),r={};r.scrollTop=function(){var n=e.query("header")[0];t.on(n,"selectstart",function(n){n.preventDefault()});t.on(n,"dblclick",function(n){o.scrollTo(window,{y:0},{duration:234});n.preventDefault()})};r.scrollTop()});
define("3n",["b","c","e","4","5"],function(n,a,v){"use strict";var e=n("b"),i=n("c"),c=n("e"),t=n("4"),d=n("5"),o={};o.nav=function(){var n="nav-"+(window["-nav-"]||"home"),a=t.query("#nav ."+n)[0];d.addClass(a,"active")};o.nav()});
define("b",["r","s","c","t","p","f","o"],function(e,o,n){"use strict";var r=e("r"),t="application/json; charset=utf-8",c=e("s"),s=e("c"),i=e("t"),a=new i,d=e("p"),u=e("f"),f=e("o"),l=f["extends"](d).create(function(e){var o=this,n=e.body&&e.body.constructor===FormData;e.headers=e.headers||{};n||(e.headers["content-type"]=e.headers["content-type"]||t);e.headers.accept=t;e.headers["x-request-csrf"]=window["-csrf-"];n||(e.body=JSON.stringify(e.body));if(e.loading!==!1&&null!==e.loading){e.loading=e.loading||"加载中";a.setText(e.loading).open()}o.xhr=r.ajax(e).on("success",function(e){switch(e.code){case 400:break;case 401:return s(e).on("sure",c);case 406:return s(e).on("close",function(){location.replace("/")})}if(200===e.code)return o.emit("success",e.data);var n=new Error(e.message);n.code=e.code;o.emit("error",n)}).on("error",function(e){o.emit("error",e)}).on("progress",function(e){o.emit("progress",e)}).on("complete finish",function(e,n){if(!e&&200!==n.code){e=new Error(n.message);e.code=n.code}o.emit(this.alienEmitter.type,e,n&&n.data)}).on("complete",function(){a.close()})});n.exports=function(e){return new l(e)}});
define("s",[],function(e,o,n){"use strict";n.exports=function(){var e=window.screen.width,o=window.screen.height,n=1080,i=600,t=(e-n)/2,r=(o-i)/3,h="/developer/oauth/authorize/";e>1080?window.open(h,"授权 github 登录","width="+n+",height="+i+",top="+r+",left="+t+",scrollbars=no,resizable=no,menubar=no"):window.location.href=h}});
define("3o",["x","b","c","d","4","1e","m","e","3p"],function(t,e,n){"use strict";var o=t("x"),i=t("b"),u=t("c"),a=t("d"),s=t("4"),r=t("1e"),d=t("m"),l=r.get("query","id"),c=t("e"),p=t("3p"),_={emptyData:{name:"",uri:"",cover:"",background:"",introduction:""},uploadOptions:{isClip:!0,minWidth:200,minHeight:200,ratio:1,ajax:{url:"http://up.qiniu.com/",method:"post",fileKey:"file"}},url:"",query:null,itemKey:"",listKey:"",type:"",data:null},y=o.create({constructor:function(t,e){var n=this;n._selector=t;n._options=c.extend(!0,{},_,e);n._init()},_init:function(){var t=this,e=t._options;t._initData();t._upload=new p(e.uploadOptions);t._upload.on("success",function(e){if(!e.key){u("上传失败");return!1}t.vue.$data[t._options.itemKey][t._imgKey]=t._url}).on("upload",function(){i({url:"/admin/api/qiniu/"}).on("success",function(e){t._url=e.url;t._upload.setOptions({ajax:{body:{key:e.key,token:e.token}}});t._upload.upload()}).on("error",function(){t.uploadDestroy();u("上传凭证获取失败")});return!1}).on("error",u)},_initData:function(){var t=this,e=t._options,n=e.itemKey,o=e.listKey;i({url:e.url,query:e.query}).on("success",function(i){var u={},a=c.extend({},e.emptyData);l&&c.each(i,function(t,e){if(e.id===l){c.extend(a,e);return!1}});u[o]=i;u[n]=a;c.extend(u,e.data);t.vue=new Vue({el:t._selector,data:u,methods:{onupload:t._onupload.bind(t),onreset:t._onreset.bind(t),onsave:t._onsave.bind(t),onchoose:t._onchoose.bind(t),onremove:t._onremove.bind(t)}});t.vue.$el.classList.remove("none");t._translate()}).on("error",u)},_onupload:function(t,e){var n=this;n._upload.setOptions("isClip",t).open();n._imgKey=e||"cover"},_onreset:function(){var t=this,e=t._options,n=e.itemKey;t.vue.$data[n]=c.extend({},e.emptyData)},_onsave:function(){var t=this,e=t._options,n=this.vue,o=e.itemKey,a=e.listKey,s=n.$data[o],r=!!s.id;i({method:"put",url:e.url,body:n.$data[o]}).on("success",function(t){r||n.$data[a].push(t);n.$data[o]=t}).on("error",u)},_onchoose:function(t){var e=this.vue,n=this._options.itemKey,o=this._options.listKey;e.$data[n]=e.$data[o][t]},_onremove:function(t){var e=this,n=e._options,o=n.listKey,s=n.type,r=e.vue,d=r.$data[o][t],l=d.id;if(d.objectCount>0)return u("该"+s+"下还有"+d.objectCount+"个项目，无法删除");var c=function(){i({url:n.url,method:"delete",body:{id:l}}).on("success",function(){r.$data[o].splice(t,1)}).on("error",u)};a("确认要删除该"+s+"吗？").on("sure",c)},_translate:function(){var t=null,e=this._options.itemKey,n=this.vue,o=s.query("#translate")[0];d.on(o,"input",function(){t&&t.abort();t=i({url:"/api/translate/?word="+encodeURIComponent(this.value),loading:null}).on("success",function(t){n.$data[e].uri=t}).on("complete",function(){t=null}).xhr})}});y.defaults=_;n.exports=y});
define("3p",["x","g","4","6","5","m","f","e","1h","1i","r","1j","1k","11","3q","3r"],function(i,e,o){"use strict";var t=i("x"),n=i("g"),s=i("4"),a=i("6"),r=i("5"),d=i("m"),c=i("f"),_=i("e"),l=a.create("canvas"),p=i("1h"),f=i("1i"),u=i("r"),g=i("1j"),m=i("1k"),h=i("11"),v=i("3q"),y=i("3r"),b=new h(v),$=window[n.html5("URL",window)],w="alien-ui-upload",C={isClip:!0,minWidth:200,minHeight:200,accept:"image/png,image/jpg,image/jpeg,image/gif,image/bmp",ratio:1,quality:1,ajax:{url:"",method:"put",headers:{},body:{},fileKey:"file"}},L=t.create({constructor:function(i){var e=this;e._options=_.extend(!0,{},C,i);e.destroyed=!1;e._isChoosed=!1;e._isReady=!1;e._initNode();e._applyOptions();e._initEvent()},_initNode:function(){var i=this,e=i._options,o=b.render(e),t=a.parse(o)[0];a.insert(t,document.body,"beforeend");i._$dialog=t;i._dialog=new g(i._$dialog,{width:"auto"});var n=s.query(".j-flag",t);i._$file=n[0];i._$imageWrap=n[1];i._$cancel=n[2];i._$submit=n[3]},_applyOptions:function(){var i=this,e=i._options;i._dialog.setTitle((e.isClip?"裁剪并":"")+"上传图片");i._$submit.innerHTML=i._submitHTML=(e.isClip?"裁剪并":"确认")+"上传图片";i._setChoosed(!1);i._resetFile();if(i._imgclip){i._imgclip.destroy();i._imgclip=null}},_resetFile:function(){var i=this;if(i._$file.files){var e=i._options,o=a.create("input",{type:"file",accept:e.accept,"class":w+"-file"});a.insert(o,i._$file,"afterend");a.remove(i._$file);i._$file=o}},_setChoosed:function(i){var e=this;if(e._isChoosed!==i){e._isChoosed=i;r[(i?"add":"remove")+"Class"](e._$dialog,w+"-choosed");i||e._setReady(i)}},_setReady:function(i){var e=this;if(e._isReady!==i){e._isReady=i;r[(i?"add":"remove")+"Class"](e._$dialog,w+"-ready");e._dialog.resize()}},_initEvent:function(){var i=this;i._dialog.on("beforeopen",function(){i._applyOptions()});i._dialog.on("close",function(){i._xhr&&i._xhr.abort()});d.on(i._$dialog,"change","."+w+"-file",function(e){var o;if(this.files&&this.files.length){o=this.files[0];if(this.accept.indexOf(o.type)>-1){i.emit("choose",e);i._setChoosed(!0);i._renderImg(o)}else i.emit("error",new Error("只能选择图片文件！"))}});d.on(i._$cancel,"click",function(){if(!i._isUpload){i._applyOptions();i._dialog.resize();i.emit("cancel")}});d.on(i._$submit,"click",function(){i._isUpload||i.emit("upload")!==!1&&i.upload()});d.on(document,"dragenter dragover",i._ondrag.bind(i));d.on(document,"drop",i._ondrop.bind(i));d.on(document,"paste",i._onpaste.bind(i))},upload:function(){var i=this,e=i._options;i._isUpload||(e.isClip?i._toBlob(function(e){i._toUpload(e)}):i._toUpload(i._file))},_ondrag:function(){var i=this;return i._dialog._window.visible?!1:void 0},_ondrop:function(i){var e=this;if(e._dialog._window.visible){e._parseImgList(i,i.dataTransfer&&i.dataTransfer.items);return!1}},_onpaste:function(i){var e=this;if(e._dialog._window.visible){e._parseImgList(i,i.clipboardData&&i.clipboardData.items);return!1}},_parseImgList:function(i,e){var o=this,t=o._options,n=null;_.each(e,function(i,e){var o;if(t.accept.indexOf(e.type)>-1&&"file"===e.kind){o=e.getAsFile();if(o&&o.size>0){n=o;return!1}}});if(n){o._setChoosed(!0);o._renderImg(n)}},_renderImg:function(i){var e=this,o=$.createObjectURL(i),t=a.create("img",{src:o}),n=e._options;t.onload=function(){e._dialog.resize()};e._$imageWrap.innerHTML="";a.insert(t,e._$imageWrap,"beforeend");e._imgclip&&e._imgclip.destroy();n.isClip?e._imgclip=new m(t,e._options).on("clipend",function(i){e._selection=i;e._setReady(!0)}).on("error",function(i){e.emit("error",i)}):e._setReady(!0);e._file=i;e._$img=t},_toBlob:function(i){var e=this,o=e._selection;l.width=o.srcWidth;l.height=o.srcHeight;p(l,e._$img,{srcLeft:o.srcLeft,srcTop:o.srcTop,srcWidth:o.srcWidth,srcHeight:o.srcHeight});f.toBlob(l,i)},_toUpload:function(i){var e=this,o=e._options,t=new FormData,n=_.extend({},o.ajax);e._isUpload=!0;t.append(n.fileKey,i);_.each(n.body,function(i,e){t.append(i,e)});n.body=t;e._xhr=u.ajax(n).on("progress",function(i){e._$submit.innerHTML="正在上传 <b>"+i.alienDetail.percent+"</b>"}).on("success",function(i){e.emit("success",i)!==!1&&e.close()}).on("error",function(i){e.emit("error",i)!==!1&&e.close()}).on("complete",function(i,o){e.emit("complete",i,o)}).on("finish",function(i,o){e.emit("finish",i,o);e._isUpload=!1;e._$submit.innerHTML=e._submitHTML})},open:function(){this._dialog.open();return this},close:function(){var i=this;i._dialog.close();return i},destroy:function(i){var e=this;if(!e.destroyed){e.destroyed=!0;d.un(e._$dialog,"change");d.un(e._$cancel,"click");d.un(e._$submit,"click");d.un(document,"dragenter dragover",e._ondrag);d.un(document,"drop",e._ondrop);d.un(document,"paste",e._onpaste);e._applyOptions();e._dialog.destroy(i)}}});L.defaults=C;t.importStyle(y);o.exports=L});
define("1h",["e","f"],function(t,r,e){"use strict";var d=t("e"),i=t("f"),h={srcLeft:0,srcTop:0,srcWidth:null,srcHeight:null,drawLeft:0,drawTop:0,drawWidth:null,drawHeight:null};e.exports=function(t,r,e){var a=t.getContext("2d");e=d.extend({},h,e);i.empty(e.srcWidth)&&(e.srcWidth=r.width);i.empty(e.srcHeight)&&(e.srcHeight=r.height);i.empty(e.drawLeft)&&(e.drawLeft=0);i.empty(e.drawTop)&&(e.drawTop=0);i.empty(e.drawWidth)&&(e.drawWidth=e.srcWidth);i.empty(e.drawHeight)&&(e.drawHeight=e.srcHeight);a.drawImage(r,e.srcLeft,e.srcTop,e.srcWidth,e.srcHeight,e.drawLeft,e.drawTop,e.drawWidth,e.drawHeight)}});
define("1i",["e","f","k","6","m"],function(t,e,n){"use strict";var a=t("e"),o=t("f"),r=t("k"),i=t("6"),l=t("m"),u="toBlob"in HTMLCanvasElement.prototype,f={type:"image/png",quality:1},s=function(t){for(var e=0,n=atob(t.split(",")[1]),a=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(n.length),r=new Uint8Array(o);e<n.length;e++)r[e]=n.charCodeAt(e);return new Blob([o],{type:a})};e.toBase64=function(t,e){e=a.extend({},f,e);return t.toDataURL(e.type,e.quality)};e.toBlob=function(t,n,i){var l=r.args(arguments);if(o["function"](l[1])){i=l[1];n={}}n=a.extend({},f,n);if(u)return t.toBlob(i,n.type,n.quality);var p=e.toBase64(t,n);i(s(p))};e.saveAs=function(t,e,n){n=a.extend({},f,n);var o=t.toDataURL(n.type,n.quality),r=i.create("a",{href:o,download:e});l.dispatch(r,"click")}});
define("3q",[],function(y,d,r){r.exports="<div class=\"alien-ui-upload\"> <div class=\"alien-ui-upload-choose\">点击选择图片或粘贴、拖拽图片到这里<input type=\"file\" accept=\"{{accept}}\" class=\"alien-ui-upload-file j-flag\"/></div> <div class=\"alien-ui-upload-image j-flag\"></div> <div class=\"alien-ui-upload-action\"> <div class=\"alien-ui-upload-btn alien-ui-upload-cancel j-flag\">取消选择</div> <div class=\"alien-ui-upload-btn alien-ui-upload-submit j-flag\"></div> </div></div>"});
define("3r",[],function(y,d,r){r.exports=".alien-ui-upload-choose{position:relative;width:500px;height:300px;text-align:center;line-height:300px;font-size:18px;color:#bbb;border:2px dashed #CCC;background:#F5F5F5;overflow:hidden}.alien-ui-upload-choose input{position:absolute;right:0;top:0;font-size:500px;opacity:0;cursor:pointer}.alien-ui-upload-image{display:none;position:relative;width:500px;max-height:500px;text-align:center}.alien-ui-upload-image img{vertical-align:middle;max-width:100%;max-height:500px;width:auto;height:auto;border:0;box-shadow:0 0 10px #888}.alien-ui-upload-action{display:none;border-top:2px solid #eee;padding-top:15px;margin:15px -20px 0;text-align:center}.alien-ui-upload-btn{display:inline-block;position:relative;border:1px solid;border-radius:4px;padding:6px 14px;font-size:14px;line-height:20px;cursor:pointer}.alien-ui-upload-cancel{background:#F9F9F9;border-color:#ddd;color:#666}.alien-ui-upload-submit{display:none;background:#458AC6;color:#FFF;border-color:#3D83C0}.alien-ui-upload-choosed .alien-ui-upload-choose{display:none}.alien-ui-upload-choosed .alien-ui-upload-action,.alien-ui-upload-choosed .alien-ui-upload-image{display:block}.alien-ui-upload-ready .alien-ui-upload-submit{display:inline-block}"});
coolie.chunk(["0","1","2"]);
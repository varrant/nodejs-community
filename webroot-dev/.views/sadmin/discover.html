<!DOCTYPE html>
<!--
 - discover
 - @author ydr.me
 - @create 2014-12-14 13:08
 -->
<html lang="zh">
<head>
    {{include ../include/meta.html}}
    {{include ./include/meta.html}}
    <script>window['-nav-']='discover';</script>
</head>
<body ontouchstart="">

{{include ./include/sidebar.html}}
{{include ./include/header.html}}

<div class="g-main">
    <div class="m-main">
        <h1 class="main-title"><i class="fi fi-compass"></i>{{title}}</h1>
        <div class="main-body" id="vue">
            {{ignore}}
            <div>
                <select class="ipt" options="categories" v-model="link.category"></select>
                <input type="text" class="ipt" v-model="link.text" placeholder="链接名称"/>
                <input type="text" class="ipt" v-model="link.url" placeholder="链接地址"/>
                <input type="text" class="ipt" v-model="link.index" placeholder="索引值"/>
                <p>
                    <button class="btn btn-primary" v-on="click: onsubmit">{{edit ? '保存' : '新建'}}链接</button>
                    <button class="btn btn-info" v-on="click: onreset" v-if="edit">取消编辑</button>
                </p>
            </div>

            <div id="list">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>链接文本</th>
                        <th>链接地址</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr v-repeat="item: list" v-class="danger: !item.verified">
                        <td>{{$index + 1}}</td>
                        <td><a href="/link/{{item.id}}/" target="_blank"><img v-attr="src: 'http://f.ydr.me/' + item.url" class="favicon" width="16" height="16"/>{{item.text}}</a></td>
                        <td>{{item.url}}</td>
                        <td class="text-center">
                            <button class="btn btn-success" v-on="click: onedit(item)">编辑</button>
                            <button class="btn btn-danger" v-on="click: onremove(item, $index)">删除</button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            {{/ignore}}
        </div>
    </div>
    {{include ./include/footer.html}}
</div>


<script coolie src="http://s.ydr.me/@/p/j/coolie/0.14.5/coolie.min.js"
        data-config="http://sb.com:18082/static/js/coolie-config.js"
        data-main="./sadmin/discover.js"></script>
</body>
</html>
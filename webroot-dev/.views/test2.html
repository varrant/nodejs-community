<!DOCTYPE html>
<!--
 - 文件描述
 - @author ydr.me
 - @create 2014-11-25 13:09
 -->
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/plain"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1.0,minimum-scale=1.0,minimal-ui">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="author" content="云淡然;http://ydr.me">
    <meta name="keywords" content="关键词1,关键词2">
    <meta name="description" content="描述语句">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <title>test2.html</title>
</head>
<body ontouchstart="">

<input type="text" name="csrf" id="csrf" value="{{$csrf}}"/>
<input type="file" name="file" id="file"/>
<button type="button" id="btn">提交</button>


<form action="/" id="form">
    <input type="text" required name="name"/>
    <button type="submit" id="submit">提交</button>
    <button type="submit" id="submit2">提交2</button>
</form>

<script>

//    document.getElementById('form').onsubmit = function (eve) {
//        eve.preventDefault();
//    };
//
    document.getElementById('submit').onclick = function (eve) {
        eve.preventDefault();
    };

    var $btn = document.getElementById('btn');
    var $file = document.getElementById('file');
    var $csrf = document.getElementById('csrf');

    $btn.onclick = function () {
        var xhr = new XMLHttpRequest();
        var files = $file.files;

        xhr.open('PUT', '/api/oss/');
        xhr.setRequestHeader('x-request-with', 'XMLHttpRequest');
        xhr.setRequestHeader('content-type', 'application/json; charset=utf-8');
        xhr.setRequestHeader('accept', 'application/json; charset=utf-8');
        xhr.setRequestHeader('x-request-csrf', $csrf.value);
        var fd = new FormData();
        fd.append('img', files[0]);
        fd.append('number', 199);
        xhr.send(JSON.stringify({
            number: 123,
            string: '123'
        }));
    };

</script>


</body>
</html>
/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.7.5
 * @license MIT
 */
!function () {
    "use strict";
    var e, n = "0.7.5", t = function () {
        return (new Date).getTime()
    }, r = 0, o = window, i = o.document, u = {}, c = [], a = function (e) {
        return Object.prototype.toString.call(e).slice(8, -1).toLowerCase()
    }, s = function (e) {
        return "array" === a(e)
    }, f = function (e) {
        return "function" === a(e)
    }, l = function (e) {
        return "string" === a(e)
    }, d = function (e, n, t) {
        var r, o;
        if (s(e))for (r = t ? e.length - 1 : 0, o = t ? 0 : e.length; (t ? r > o : o > r) && n(r, e[r]) !== !1; t ? r-- : r++); else if ("object" == typeof e)for (r in e)if (n(r, e[r]) === !1)break
    }, p = function () {
        var e = {}, n = o.console, t = ["log", "warn", "group", "groupEnd"];
        return d(t, function (t, r) {
            e[r] = function () {
                if (n && n[r])try {
                    n[r].apply(n, arguments)
                } catch (e) {
                }
            }
        }), e
    }(), v = /\/[^/]+$/, h = function (e, n) {
        return e = e.replace(b, ""), "/" === e ? e : v.test(e) ? n ? e + "/" : e.replace(v, "/") : e
    }, g = /^\//, _ = /^(\.{1,2})\//, w = /\/[^/]+?\/$/, m = function (e, n) {
        if (!n || g.test(n))return n;
        var t;
        for (n = "./" + n; t = n.match(_);)n = n.replace(_, ""), 2 === t[1].length && (e = e.replace(w, "/"));
        return e + n
    }, x = function (e, n) {
        return (n || i).getElementsByTagName(e)
    }, y = /[\?#].*?$/, b = /https?:\/\/[^/]*/, A = /\.js($|\?)/i, $ = function (e, n) {
        return e = e.replace(y, ""), n ? e : (w.test(e) && (e += "index"), e + (A.test(e) ? "" : ".js"))
    }, q = function (e) {
        return $(e.hasAttribute ? e.src : e.getAttribute("src", 4))
    }, j = function (e, n) {
        return e.getAttribute("data-" + n)
    }, E = /loaded|complete/, S = i.head || x("head", i)[0], T = x("base", S)[0], C = /\.[^.]*$/, k = function (e) {
        if (!u._v)return e;
        var n = l(u._v) ? u._v : u._v[e];
        return n ? e.replace(C, "." + n + "$&") : e
    }, B = null, L = function (n, t) {
        var r = k(n), u = i.createElement("script"), c = !1, a = function (e) {
            if (!c) {
                if (c = !0, e && "error" === e.type)throw"load script error\n" + r;
                t !== !0 && (B = u, tn(u)), S.removeChild(u), u = null
            }
        };
        u.src = r, u.id = n, u.async = !0, u.defer = !0, u.onload !== e ? u.onload = u.onerror = a : u.onreadystatechange = function (e) {
            E.test(u.readyState) && (e = e || o.event, a(e))
        }, T ? S.insertBefore(u, T) : S.appendChild(u)
    }, M = function (e) {
        var n, t = k(e), r = new XMLHttpRequest, o = function () {
            if (4 === r.readyState && !n) {
                if (n = !0, 200 !== r.status && 304 !== r.status)throw"ajax error\n" + t;
                rn({
                    _isAn: J._isAn, id: e, url: t, deps: [], factory: function () {
                        return r.responseText
                    }
                })
            }
        };
        r.onload = r.onreadystatechange = r.onerror = r.onabort = r.ontimeout = o, r.open("GET", t), r.send(null)
    }, D = function () {
        var e = x("script");
        return e[e.length - 1]
    }(), G = q(D), H = G.match(b)[0], N = j(D, "config"), O = j(D, "main"), R = h(G), X = m(R, N), z = H + X, F = {};
    F.version = n;
    var I = null, J = {}, K = !1, P = {}, Q = [], U = {}, V = 1, W = 0;
    F.config = function (e) {
        u = e, I = m(R, h(u.base, !0)), u.version = u.version || {}, u.host && (H = u.host), l(u.version) ? u._v = u.version : (u._v = {}, d(u.version, function (e, n) {
            u._v[H + m(I, e)] = n
        }));
        var n = J.url = $(H + m(I, O));
        return J._defined = !1, P[n] = J, F
    }, F.use = function () {
        return K ? void 0 : (K = !0, r = t(), L(J.url), p.group("coolie modules"), F)
    }, F.callback = function (e) {
        return f(e) && c.push(e), F
    };
    var Y = /"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g, Z = /\\\\/g, en = function (e) {
        var n = [];
        return e.replace(Z, "").replace(Y, function (e, t, r) {
            r && n.push(r)
        }), n
    }, nn = /^(css|html|text)!/i, tn = function (e) {
        var n = !0, t = Q.shift(), r = t[0], o = t[1], i = t[2], u = e.id, c = q(e), a = h(u);
        f(t[2]) ? n = !1 : f(t[1]) ? (r = null, o = [], i = t[1]) : f(t[0]) && (i = t[0], o = en(i.toString()), r = null), r = J._defined && J._isAn ? u : r || u;
        var s = {_isAn: n, _path: a, _node: e, id: r, url: c, deps: o, factory: i};
        J.id || (n || (P[r] = P[J.url]), s._isMain = !0, J = s, J._defined = !0);
        var l = [];
        d(o, function (e, n) {
            var t = n;
            if (J._isAn) {
                var i = nn.test(n);
                n = n.replace(nn, "");
                var u = o[e] = m(a, n);
                t = $(H + u, i)
            }
            if (r === t)throw"required oneself: \n" + r;
            U[t] && d(U[t].deps, function (e, n) {
                if (n === r)throw"required circle: \n" + t + "\n" + r
            }), P[t] || (l.push(t), P[t] = !0, V++, J._isAn ? i ? M(t) : L(t) : tn(B))
        }), s.deps = l, rn(s)
    }, rn = function (e) {
        e.exports = {}, e._execute = function () {
            var n = function (n) {
                var t = nn.test(n);
                n = n.replace(nn, "");
                var r = J._isAn ? H + $(m(e._path, n), t) : n;
                if (!U[r])throw"can not found module \n" + r + "\nbut required in\n" + e.id;
                return U[r]._execute()
            };
            return function () {
                var t = e.id;
                return e._executed ? U[t].exports : (e._executed = !0, U[t].exports = e.factory.call(window, n, e.exports, e) || e.exports, U[t].exports)
            }
        }(), U[e.id] = e, W++, p.log("module " + e.id), W === V && (p.log("past " + (t() - r) + "ms"), p.groupEnd("coolie modules"), J._execute(), d(c, function (e, n) {
            n.call(F)
        }))
    }, on = function (e, n, t) {
        Q.push([e, n, t])
    };
    N && L(z + "?" + t(), !0), window.coolie = F, window.coolie.modules = U, window.coolie.configs = u, window.define = on, window.define.amd = {}, window.define.cmd = {}
}();
/*!
 * coolie 苦力
 * @author ydr.me
 * @version 0.6.3
 * @license MIT
 */
!function(){"use strict";function e(e,r){var o,c,l,d={};2===arguments.length?(l=e,d._isAnonymous=!1,d._id=r,d._type="ajax",d._path=a(r),d._deps=[],d._factory=function(e,t,n){n.exports=l.responseText||"",l=null},t(d),V[d._id]=d,Q[d._id]={}):Z.length&&(c=e,o=Z.shift(),d._isAnonymous=""===o[0],d._id=o[0]||c.id,d._type=o[0]?"local":"script",c=null,d._path=d._isAnonymous?a(d._id):"",d._deps=o[1],d._factory=o[2],t(d),V[d._id]=d,Q[d._id]={},d._deps.length&&h(d._deps,function(e,t){var n=t.replace(G,""),r=d._isAnonymous?s(d._path,n):n;if(Q[r]&&Q[r][d._id])throw"module `"+d._id+"` and module `"+r+"` make up a circular dependency relationship";d._deps[e]=r,Q[d._id][r]=1,et.push({id:r,by:d._id}),Q[r]||(Q[r]={},G.test(t)?u(r):i(r))})),W===Y&&!Z.length&&j&&V[j]&&(h(et,function(e,t){if(!Q[t.id])throw"can not found module `"+t.id+"`, but module `"+t.by+"` dependence on it"}),n(j),Q=null,Z=null,et=null)}function t(e){e.exports={},e._exec=function(){var t=function(t){var n=e._isAnonymous?s(a(e._id),r(t)):t;if(!V[n])throw"can not found module `"+n+"`, but required in `"+e._id+"`";return V[n]._exec()};return function(){var n=e._id;return e._hasExport?V[n].exports:(e._hasExport=!0,V[n].exports=e._factory.call(window,t,e.exports,e)||e.exports,V[n].exports)}}()}function n(e){if(!V[e])throw"can not found module `"+e+"`";tt.log("past "+(y()-A)+" ms"),tt.groupEnd("coolie modules"),V[e]._exec(),p(coolie.callback)&&coolie.callback(V[e].exports)}function r(e){if(G.test(e))return e.replace(N,"").replace(G,"");if(e.indexOf("?")>-1)return e;var t=e.slice(-1);switch(t){case"#":return e.slice(0,-1);case"/":return e+"index.js";default:return H.test(e)?e:e+".js"}}function o(e,t,n){var r=document.createElement("script"),o=function(){X.removeChild(r),p(t)&&t.apply(this,arguments)};r.id=n,r.src=e,r.async=!0,r.defer=!0,X.appendChild(r),U?r.onload=o:r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&o.call(this,arguments)},r.onerror=o}function i(t){t=r(t);var n=c(t),i=y(),u=g(t);return W++,n?void o(u,function(t){"error"===t.type?tt.groupEnd("coolie modules"):(tt.log("script module",u,y()-i+"ms"),Y++,e(this))},t):setTimeout(function(){tt.log("local module",u,y()-i+"ms"),Y++,e()},1)}function u(t){W++;var n,r=new XMLHttpRequest,o=y(),i=function(){if(4===r.readyState&&!n){if(n=!0,200!==r.status&&304!==r.status)throw"can not ajax "+t+", response status is "+r.status;tt.log("text module",t,y()-o+"ms"),Y++,e(r,t)}};r.onload=r.onreadystatechange=r.onerror=r.onabort=r.ontimeout=i,r.open("GET",t),r.send(null)}function a(e){return e.replace(C,"/")}function c(e){var t;return D.test(e)?(t=e.match(D),t[1]||"//"):(e.replace(G,"").match(O)||[""])[0]}function s(e,t){for(;q.test(t);)t=t.replace(q,"");var n=(e.match(D)||[""])[0],r=c(e),o=c(t),i=0,u=e.replace(D,""),a=t;if(D.test(o))return B.test(t)?t:location.protocol+t;switch(r||(u="./"+u),"/"!==u.slice(-1)&&(u+="/"),o||(a="./"+a,o="./"),o){case"./":return n+u+a.slice(2);case"../":for(i=a.match(T).length;i-->0;){if(!L.test(u))throw"can not change path from `"+e+"` to `"+t+"`";u=u.replace(L,"")}return n+u+a.replace(T,"");default:return n+a}}function l(e){var t=[];return e.replace(S,"").replace(k,function(e,n,r){r&&t.push(r)}),t}function d(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function f(e){return"array"===d(e)}function p(e){return"function"===d(e)}function m(e){return"string"===d(e)}function h(e,t){var n,r;if(f(e))for(n=0,r=e.length;r>n&&t(n,e[n])!==!1;n++);else if("object"==typeof e)for(n in e)if(e.hasOwnProperty(n)&&t(n,e[n])===!1)break}function g(e){var t,n,r,o=d(K.version);switch(o){case"string":return v(e,encodeURIComponent(K.version));case"object":return t=e.replace(K.base,""),r=(e.match(M)||[""])[0],n=K.version[t]||K.version["./"+t],n?e.replace(M,"").replace(R,"."+n+"$1")+r:e;default:return e}}function _(){var e=document.getElementsByTagName("script");return e[e.length-1]}function w(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function b(e,t){return e.getAttribute("data-"+t)}function y(){return(new Date).getTime()}function v(e,t){return e+(e.indexOf("?")>-1?"&":"?")+"_="+(t||y())}var x,E,j,A,$="0.6.3",k=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,S=/\\\\/g,T=/\.\.\//g,q=/^.\//,C=/\/([^\/]+)$/,O=/(\.{1,2}|^)\//,L=/[^\/]+\/$/,M=/\?.*$/,N=/[?#].*$/,R=/(\.[^.]*)$/,B=/^https?:/i,D=/^(.*)\/\/[^/]*/,G=/^(css|html|text)!/i,H=/\.js$/i,I=!0,P=_(),U="onload"in P,X=P.parentNode,z=a(w(P)),F=b(P,"main"),J=b(P,"config"),K={},Q={},V={},W=0,Y=0,Z=[],et=[],tt=function(){var e={},t=window.console,n=["log","warn","group","groupEnd"];return h(n,function(n,r){e[r]=function(){if(t&&t[r])try{t[r].apply(t,arguments)}catch(e){}}}),e}();window.define=function(e,t,n){var r=arguments,o=1===r.length;if(j||(I=o,o?j=x:(E=j=e,Q={},Q[E]={})),o)e="",t=[],n=r[0];else{if(!m(e))throw"module id must be a string";if(p(r[1])&&(n=r[1],t=[]),!f(t))throw"module defineModules must be an array"}if(!p(n))throw"module factory must be a function";I&&(e="",t=l(n.toString())),Z.push([e,t,n])},window.define.amd={},window.define.cmd={},window.coolie={version:$,modules:V,callback:null,config:function(e){return e=e||{},K.base=e.base?s(z,e.base):z,K.version=e.version,K.cache=!!e.cache,this},use:function(e){if(x)throw new Error("can not  execute `coolie.use` twice more");if(!m(K.base))throw new Error("coolie config `base` property must be a string");if(e&&!m(e))throw new Error("main module must be a string");return F&&F!==e&&(e&&tt.warn("attribute main is `"+F+"`, but use main is `"+e+"`"),e=F),x=s(K.base,e),A=y(),tt.group("coolie modules"),i(x),this}},J&&o(v(s(z,J)))}();